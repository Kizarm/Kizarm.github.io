<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>hdo: Zdrojový soubor /home/mrazik/Projekty/Kizarm.github.io/hdo/hdo/main.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hdo
   &#160;<span id="projectnumber">beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generováno programem Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hlavní&#160;stránka</span></a></li>
      <li><a href="pages.html"><span>Ostatní&#160;stránky</span></a></li>
      <li><a href="annotated.html"><span>Třídy</span></a></li>
      <li class="current"><a href="files.html"><span>Soubory</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Seznam&#160;souborů</span></a></li>
      <li><a href="globals.html"><span>Globální&#160;symboly</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_92b95843e90daadc485b14226e438e59.html">mrazik</a></li><li class="navelem"><a class="el" href="dir_f3ad28f1896cd39387847ce3c3236ab1.html">Projekty</a></li><li class="navelem"><a class="el" href="dir_0a864d6769c20f4e975f7bd32848bb20.html">Kizarm.github.io</a></li><li class="navelem"><a class="el" href="dir_d5357cb57dcee12078a4c73baa854556.html">hdo</a></li><li class="navelem"><a class="el" href="dir_1b8f3ca87cec8965627da2ca6054f7aa.html">hdo</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">main.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8c.html">Zobrazit dokumentaci tohoto souboru.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* ----------------------------------------------------------------------------</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *         ATMEL Microcontroller Software Support</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * ----------------------------------------------------------------------------</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2008, Atmel Corporation, Mrazík</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * ----------------------------------------------------------------------------</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//         Headers</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="board_8h.html">board.h</a>&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="pio_8h.html">pio/pio.h</a>&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="pit_8h.html">pit/pit.h</a>&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="dbgu_8h.html">dbgu/dbgu.h</a>&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="aic_8h.html">aic/aic.h</a>&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="trace_8h.html">utility/trace.h</a>&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="led_8h.html">utility/led.h</a>&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="adc_8h.html">adc/adc.h</a>&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="goertzel_8h.html">goertzel.h</a>&quot;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hdo_8h.html">hdo.h</a>&quot;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="main_8c.html#a60b1362f77905db322205b68512cc3b9">  121</a></span>&#160;<span class="preprocessor">#define BOARD_ADC_FREQ 6000000</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#define PIT_PERIOD          1000</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//         Local variables</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="main_8c.html#a7278b38581116a93504819a7126161da">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structPin.html">Pin</a> <a class="code" href="main_8c.html#a7278b38581116a93504819a7126161da">pinsADC</a>[] = {<a class="code" href="board_8h.html#a0c6ba600c2305b2347eaa9e00e4d8add">PINS_ADC</a>};</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="main_8c.html#a93e43f445f37f6b4655bd3d596950db5">  131</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#a93e43f445f37f6b4655bd3d596950db5">timestamp</a> = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">  133</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a> = 0;   </div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">  134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a>;                        </div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="main_8c.html#a29495fd34275d2f9954bfe6a9e1aec3f">  135</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="main_8c.html#a29495fd34275d2f9954bfe6a9e1aec3f">buf_a</a> [<a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>];            </div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="main_8c.html#af9179a79580e2761d7045b0e4b005ccb">  136</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="main_8c.html#af9179a79580e2761d7045b0e4b005ccb">buf_b</a> [<a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>];            </div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">  137</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span>   <a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> = 0;          </div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span>   <a class="code" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a>  = 0;          </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#define ADC_NUM_1  ADC_CHANNEL_4</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">//         Local functions</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="main_8c.html#ae042ff7607b467a923e8151dbf363ef0">  147</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#ae042ff7607b467a923e8151dbf363ef0">ISR_Pit</a> (<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> status;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// Read the PIT status register</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  status = <a class="code" href="pit_8h.html#aeab3edf1a49037466c47df7a7f7c9089">PIT_GetStatus</a>() &amp; AT91C_PITC_PITS;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (status != 0) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Read the PIVR to acknowledge interrupt and get number of ticks</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="main_8c.html#a93e43f445f37f6b4655bd3d596950db5">timestamp</a> += (<a class="code" href="pit_8h.html#a52f00a87f1a6bffa8a6aeeef0ea7c751">PIT_GetPIVR</a>() &gt;&gt; 20);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="adc_8h.html#a334d8fb119092610cc27eb4084e9996b">ADC_EnableIt</a> (AT91C_BASE_ADC, ADC_NUM_1);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Start measurement</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="adc_8h.html#a144e94d9b29371c7e15ecb2872e59d70">ADC_StartConversion</a> (AT91C_BASE_ADC);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="main_8c.html#a142bb31180c2ee763974cb8532cc0758">  166</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#a142bb31180c2ee763974cb8532cc0758">ISR_Adc</a> (<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> status;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> id_channel = ADC_NUM_1;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  status = <a class="code" href="adc_8h.html#ac96bb549d0e3ba0308740e482532a071">ADC_GetStatus</a> (AT91C_BASE_ADC);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="trace_8h.html#a67a8f9bc74358aa21745a76e23768dae">TRACE_DEBUG</a> (<span class="stringliteral">&quot;status = 0x%X\n\r&quot;</span>, status);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="adc_8h.html#a62b61a035a2f7b2e6737b937186a7455">ADC_IsChannelInterruptStatusSet</a> (status, id_channel)) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="trace_8h.html#a67a8f9bc74358aa21745a76e23768dae">TRACE_DEBUG</a> (<span class="stringliteral">&quot;channel %d\n\r&quot;</span>, id_channel);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="adc_8h.html#ad81de8e05cf975c2a543a2d113bbee5a">ADC_DisableIt</a> (AT91C_BASE_ADC, id_channel);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a>  = <a class="code" href="adc_8h.html#a50b3d21fee713c910ed989fe20a43c09">ADC_GetConvertedData</a> (AT91C_BASE_ADC, id_channel);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a> -= 512;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> == 0) <a class="code" href="main_8c.html#a29495fd34275d2f9954bfe6a9e1aec3f">buf_a</a> [<a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a>] = <a class="code" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">else</span>              <a class="code" href="main_8c.html#af9179a79580e2761d7045b0e4b005ccb">buf_b</a> [<a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a>] = <a class="code" href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a>++;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a> == <a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a> = 0;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> == 0) <a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> = 1;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">else</span>              <a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> = 0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a> = 1;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="main_8c.html#a6fe8ff2042aa1f358f3cc24971f0d65f">  195</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#a6fe8ff2042aa1f358f3cc24971f0d65f">ConfigurePit</a> (<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// Initialize the PIT to the desired frequency</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="pit_8h.html#aa8bd959a8245cb7be998b836d1ecea9f">PIT_Init</a> (<a class="code" href="main_8c.html#a9f945ece6843f9a3540423f3782983b6">PIT_PERIOD</a>, <a class="code" href="board_8h.html#ae9cca1603768bb2e6c82bd0ccedf2b5c">BOARD_MCK</a> / 1000000);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// Configure interrupt on PIT</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="aic_8h.html#ae1994e8c381e2844590a551c427dedc7">AIC_DisableIT</a> (AT91C_ID_SYS);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="aic_8h.html#a8a8ec12c50249eecb9c15b91f4ea871d">AIC_ConfigureIT</a> (AT91C_ID_SYS, AT91C_AIC_PRIOR_LOWEST, <a class="code" href="main_8c.html#ae042ff7607b467a923e8151dbf363ef0">ISR_Pit</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="aic_8h.html#a0e2e5c00d265e4ac861a7a3aff0bd156">AIC_EnableIT</a> (AT91C_ID_SYS);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="pit_8h.html#a6f180b265d87b9ac11fe2aaf33f871fa">PIT_EnableIT</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// Enable the pit</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="pit_8h.html#a663c556a07a41bb03b47dc8b18a14b06">PIT_Enable</a>();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">//         Global functions</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">  215</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">char</span> telegram [64];</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordtype">int</span>  coeff;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordtype">int</span>  gresult;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordtype">int</span>  tmp;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="trace_8h.html#afdc0f56a5b5521c1ae4f8fab505c6620">TRACE_CONFIGURE</a> (<a class="code" href="dbgu_8h.html#aa6981b9ed604211543dd66ff300db92f">DBGU_STANDARD</a>, 115200, <a class="code" href="board_8h.html#ae9cca1603768bb2e6c82bd0ccedf2b5c">BOARD_MCK</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="stdio_8c.html#ad6c265f6d41266cbb62035915f9c0030">printf</a> (<span class="stringliteral">&quot;-- ADC Projekt HDO %s --\n\r&quot;</span>, <a class="code" href="trace_8h.html#a6370af17e72f0c84861c670a3086a3ed">SOFTPACK_VERSION</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="stdio_8c.html#ad6c265f6d41266cbb62035915f9c0030">printf</a> (<span class="stringliteral">&quot;-- %s\n\r&quot;</span>, <a class="code" href="board_8h.html#a02581754b212d533d96cde56c8145c9b">BOARD_NAME</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="stdio_8c.html#ad6c265f6d41266cbb62035915f9c0030">printf</a> (<span class="stringliteral">&quot;-- Compiled: %s %s --\n\r&quot;</span>, __DATE__, __TIME__);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="led_8h.html#a735b8eee6634106b844cd5cdae1be20d">LED_Configure</a> (0);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="led_8h.html#a735b8eee6634106b844cd5cdae1be20d">LED_Configure</a> (1);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="led_8h.html#a735b8eee6634106b844cd5cdae1be20d">LED_Configure</a> (2);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="led_8h.html#a735b8eee6634106b844cd5cdae1be20d">LED_Configure</a> (3);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="pio_8h.html#a12d75e14e0ca9a69bf4a60bdd4a62af6">PIO_Configure</a> (pinsADC, <a class="code" href="pio_8h.html#a2e86ed748eb3ae9574ac9822e67154f6">PIO_LISTSIZE</a> (pinsADC));</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="adc_8h.html#a68cebe77ab8a6ec1f9a349b579d5d49a">ADC_Initialize</a> (AT91C_BASE_ADC,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                  AT91C_ID_ADC,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                  AT91C_ADC_TRGEN_DIS,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                  0,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                  AT91C_ADC_SLEEP_NORMAL_MODE,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                  AT91C_ADC_LOWRES_10_BIT,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                  <a class="code" href="board_8h.html#ae9cca1603768bb2e6c82bd0ccedf2b5c">BOARD_MCK</a>,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                  <a class="code" href="main_8c.html#a60b1362f77905db322205b68512cc3b9">BOARD_ADC_FREQ</a>,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                  10,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                  1200);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="adc_8h.html#a8e6a2fc2cfff3822bda1e4041fcb53c2">ADC_EnableChannel</a> (AT91C_BASE_ADC, ADC_NUM_1);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="main_8c.html#a6fe8ff2042aa1f358f3cc24971f0d65f">ConfigurePit</a>();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="aic_8h.html#a8a8ec12c50249eecb9c15b91f4ea871d">AIC_ConfigureIT</a> (AT91C_ID_ADC, 0, <a class="code" href="main_8c.html#a142bb31180c2ee763974cb8532cc0758">ISR_Adc</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="aic_8h.html#a0e2e5c00d265e4ac861a7a3aff0bd156">AIC_EnableIT</a> (AT91C_ID_ADC);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  coeff = <a class="code" href="goertzel_8h.html#a80be7aab3945fc7dec9768728edfdb29">calc_coeff</a> (0.2166);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="hdo_8c.html#a77e237b58e4371580dfc9f4d44730d61">hdo_init</a> (300);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">//printf (&quot;-I- Press any key to perform a measurement on the ADC ...\n\r&quot;);</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Wait for user input</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">//DBGU_GetChar();</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// Infinite loop</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a> == 0) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      gresult = <a class="code" href="goertzel_8h.html#a31cae6c660786d9bc292328f84f80693">goertzel</a> (coeff, <a class="code" href="main_8c.html#af9179a79580e2761d7045b0e4b005ccb">buf_b</a>, <a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="led_8h.html#a14c184b30679f0e8f3472de693de3a9c">LED_Set</a> (0);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      gresult = <a class="code" href="goertzel_8h.html#a31cae6c660786d9bc292328f84f80693">goertzel</a> (coeff, <a class="code" href="main_8c.html#a29495fd34275d2f9954bfe6a9e1aec3f">buf_a</a>, <a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="led_8h.html#a1ba3dbb49e39a10ae34edd133bdc5749">LED_Clear</a> (0);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span>    ( <a class="code" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a>) TRACE_ERROR (<span class="stringliteral">&quot;Nestiham !\r\n&quot;</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a> = 0;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    tmp = <a class="code" href="hdo_8c.html#aa4c2fb760118424ea9c295b05189f47b">tlg_decode</a> (gresult, telegram);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="stdio_8c.html#ad6c265f6d41266cbb62035915f9c0030">printf</a> (<span class="stringliteral">&quot;: %s\r\n&quot;</span>, telegram);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (tmp &gt;= 0) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      tmp = <a class="code" href="hdo_8c.html#ae78234a72fc195b9d8ce70596d1ebba3">hdo_action</a> (telegram, <span class="stringliteral">&quot;A1B2DP2&quot;</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span>      (tmp == +1) <a class="code" href="led_8h.html#a14c184b30679f0e8f3472de693de3a9c">LED_Set</a>   (2);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp == -1) <a class="code" href="led_8h.html#a1ba3dbb49e39a10ae34edd133bdc5749">LED_Clear</a> (2);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      tmp = <a class="code" href="hdo_8c.html#ae78234a72fc195b9d8ce70596d1ebba3">hdo_action</a> (telegram, <span class="stringliteral">&quot;A1B2DP4&quot;</span>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span>      (tmp == +1) <a class="code" href="led_8h.html#a14c184b30679f0e8f3472de693de3a9c">LED_Set</a>   (3);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp == -1) <a class="code" href="led_8h.html#a1ba3dbb49e39a10ae34edd133bdc5749">LED_Clear</a> (3);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (gresult &gt; 150) <a class="code" href="led_8h.html#a14c184b30679f0e8f3472de693de3a9c">LED_Set</a>   (1);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">else</span>               <a class="code" href="led_8h.html#a1ba3dbb49e39a10ae34edd133bdc5749">LED_Clear</a> (1);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="main_8c.html#a93e43f445f37f6b4655bd3d596950db5">timestamp</a> = 0;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="ttc" id="main_8c_html_a9f945ece6843f9a3540423f3782983b6"><div class="ttname"><a href="main_8c.html#a9f945ece6843f9a3540423f3782983b6">PIT_PERIOD</a></div><div class="ttdeci">#define PIT_PERIOD</div><div class="ttdoc">PIT perioda timeru - hodnota v �sekundách. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00123">main.c:123</a></div></div>
<div class="ttc" id="adc_8h_html_a62b61a035a2f7b2e6737b937186a7455"><div class="ttname"><a href="adc_8h.html#a62b61a035a2f7b2e6737b937186a7455">ADC_IsChannelInterruptStatusSet</a></div><div class="ttdeci">unsigned char ADC_IsChannelInterruptStatusSet(unsigned int adc_sr, unsigned int channel)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00337">adc.c:337</a></div></div>
<div class="ttc" id="goertzel_8h_html_a3e54a43ba47c98ea91d741ae4a1719ed"><div class="ttname"><a href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a></div><div class="ttdeci">#define GOERTZEL_N</div><div class="ttdoc">počet vzorků, ze kterých se to počítá </div><div class="ttdef"><b>Definition:</b> <a href="goertzel_8h_source.html#l00036">goertzel.h:36</a></div></div>
<div class="ttc" id="trace_8h_html"><div class="ttname"><a href="trace_8h.html">trace.h</a></div></div>
<div class="ttc" id="aic_8h_html_a8a8ec12c50249eecb9c15b91f4ea871d"><div class="ttname"><a href="aic_8h.html#a8a8ec12c50249eecb9c15b91f4ea871d">AIC_ConfigureIT</a></div><div class="ttdeci">void AIC_ConfigureIT(unsigned int source, unsigned int mode, void(*handler)(void))</div><div class="ttdef"><b>Definition:</b> <a href="aic_8c_source.html#l00054">aic.c:54</a></div></div>
<div class="ttc" id="main_8c_html_a7278b38581116a93504819a7126161da"><div class="ttname"><a href="main_8c.html#a7278b38581116a93504819a7126161da">pinsADC</a></div><div class="ttdeci">static const Pin pinsADC[]</div><div class="ttdoc">Použité Pio piny (ADC). </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00129">main.c:129</a></div></div>
<div class="ttc" id="main_8c_html_a29495fd34275d2f9954bfe6a9e1aec3f"><div class="ttname"><a href="main_8c.html#a29495fd34275d2f9954bfe6a9e1aec3f">buf_a</a></div><div class="ttdeci">static short buf_a[GOERTZEL_N]</div><div class="ttdoc">první bufer pro AD data </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00135">main.c:135</a></div></div>
<div class="ttc" id="adc_8h_html_a50b3d21fee713c910ed989fe20a43c09"><div class="ttname"><a href="adc_8h.html#a50b3d21fee713c910ed989fe20a43c09">ADC_GetConvertedData</a></div><div class="ttdeci">unsigned int ADC_GetConvertedData(AT91S_ADC *pAdc, unsigned int channel)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00208">adc.c:208</a></div></div>
<div class="ttc" id="goertzel_8h_html"><div class="ttname"><a href="goertzel_8h.html">goertzel.h</a></div><div class="ttdoc">Výpočet poměrného obsahu signálu o dané frekvenci ve vzorku. </div></div>
<div class="ttc" id="pit_8h_html_aeab3edf1a49037466c47df7a7f7c9089"><div class="ttname"><a href="pit_8h.html#aeab3edf1a49037466c47df7a7f7c9089">PIT_GetStatus</a></div><div class="ttdeci">unsigned int PIT_GetStatus(void)</div><div class="ttdoc">Read PIT status register. </div><div class="ttdef"><b>Definition:</b> <a href="pit_8c_source.html#l00096">pit.c:96</a></div></div>
<div class="ttc" id="hdo_8h_html"><div class="ttname"><a href="hdo_8h.html">hdo.h</a></div><div class="ttdoc">Vyhodnocení telegramu HDO. </div></div>
<div class="ttc" id="trace_8h_html_afdc0f56a5b5521c1ae4f8fab505c6620"><div class="ttname"><a href="trace_8h.html#afdc0f56a5b5521c1ae4f8fab505c6620">TRACE_CONFIGURE</a></div><div class="ttdeci">#define TRACE_CONFIGURE(mode, baudrate, mck)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00122">trace.h:122</a></div></div>
<div class="ttc" id="board_8h_html_a02581754b212d533d96cde56c8145c9b"><div class="ttname"><a href="board_8h.html#a02581754b212d533d96cde56c8145c9b">BOARD_NAME</a></div><div class="ttdeci">#define BOARD_NAME</div><div class="ttdoc">String containing the name of the board. </div><div class="ttdef"><b>Definition:</b> <a href="board_8h_source.html#l00082">board.h:82</a></div></div>
<div class="ttc" id="structPin_html"><div class="ttname"><a href="structPin.html">Pin</a></div><div class="ttdef"><b>Definition:</b> <a href="pio_8h_source.html#l00131">pio.h:131</a></div></div>
<div class="ttc" id="dbgu_8h_html"><div class="ttname"><a href="dbgu_8h.html">dbgu.h</a></div></div>
<div class="ttc" id="main_8c_html_a59bc5ec2d75b7f3e260870366c6880f8"><div class="ttname"><a href="main_8c.html#a59bc5ec2d75b7f3e260870366c6880f8">change</a></div><div class="ttdeci">static volatile int change</div><div class="ttdoc">změna přepínače buferů </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00138">main.c:138</a></div></div>
<div class="ttc" id="adc_8h_html_a334d8fb119092610cc27eb4084e9996b"><div class="ttname"><a href="adc_8h.html#a334d8fb119092610cc27eb4084e9996b">ADC_EnableIt</a></div><div class="ttdeci">void ADC_EnableIt(AT91S_ADC *pAdc, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00247">adc.c:247</a></div></div>
<div class="ttc" id="main_8c_html_a3f1b4498916ca8ad87eb9fd6f97b8404"><div class="ttname"><a href="main_8c.html#a3f1b4498916ca8ad87eb9fd6f97b8404">counter</a></div><div class="ttdeci">static volatile unsigned int counter</div><div class="ttdoc">Index pro zápis do buferu. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00133">main.c:133</a></div></div>
<div class="ttc" id="pio_8h_html_a12d75e14e0ca9a69bf4a60bdd4a62af6"><div class="ttname"><a href="pio_8h.html#a12d75e14e0ca9a69bf4a60bdd4a62af6">PIO_Configure</a></div><div class="ttdeci">unsigned char PIO_Configure(const Pin *list, unsigned int size)</div><div class="ttdef"><b>Definition:</b> <a href="pio_8c_source.html#l00217">pio.c:217</a></div></div>
<div class="ttc" id="aic_8h_html"><div class="ttname"><a href="aic_8h.html">aic.h</a></div></div>
<div class="ttc" id="main_8c_html_a6fe8ff2042aa1f358f3cc24971f0d65f"><div class="ttname"><a href="main_8c.html#a6fe8ff2042aa1f358f3cc24971f0d65f">ConfigurePit</a></div><div class="ttdeci">static void ConfigurePit(void)</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00195">main.c:195</a></div></div>
<div class="ttc" id="adc_8h_html"><div class="ttname"><a href="adc_8h.html">adc.h</a></div></div>
<div class="ttc" id="pit_8h_html_a663c556a07a41bb03b47dc8b18a14b06"><div class="ttname"><a href="pit_8h.html#a663c556a07a41bb03b47dc8b18a14b06">PIT_Enable</a></div><div class="ttdeci">void PIT_Enable(void)</div><div class="ttdoc">Enable the PIT. </div><div class="ttdef"><b>Definition:</b> <a href="pit_8c_source.html#l00064">pit.c:64</a></div></div>
<div class="ttc" id="trace_8h_html_a6370af17e72f0c84861c670a3086a3ed"><div class="ttname"><a href="trace_8h.html#a6370af17e72f0c84861c670a3086a3ed">SOFTPACK_VERSION</a></div><div class="ttdeci">#define SOFTPACK_VERSION</div><div class="ttdoc">Softpack Version. </div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00082">trace.h:82</a></div></div>
<div class="ttc" id="adc_8h_html_a68cebe77ab8a6ec1f9a349b579d5d49a"><div class="ttname"><a href="adc_8h.html#a68cebe77ab8a6ec1f9a349b579d5d49a">ADC_Initialize</a></div><div class="ttdeci">void ADC_Initialize(AT91S_ADC *pAdc, unsigned char idAdc, unsigned char trgEn, unsigned char trgSel, unsigned char sleepMode, unsigned char resolution, unsigned int mckClock, unsigned int adcClock, unsigned int startupTime, unsigned int sampleAndHoldTime)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00070">adc.c:70</a></div></div>
<div class="ttc" id="adc_8h_html_ac96bb549d0e3ba0308740e482532a071"><div class="ttname"><a href="adc_8h.html#ac96bb549d0e3ba0308740e482532a071">ADC_GetStatus</a></div><div class="ttdeci">unsigned int ADC_GetStatus(AT91S_ADC *pAdc)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00297">adc.c:297</a></div></div>
<div class="ttc" id="aic_8h_html_ae1994e8c381e2844590a551c427dedc7"><div class="ttname"><a href="aic_8h.html#ae1994e8c381e2844590a551c427dedc7">AIC_DisableIT</a></div><div class="ttdeci">void AIC_DisableIT(unsigned int source)</div><div class="ttdef"><b>Definition:</b> <a href="aic_8c_source.html#l00083">aic.c:83</a></div></div>
<div class="ttc" id="hdo_8c_html_aa4c2fb760118424ea9c295b05189f47b"><div class="ttname"><a href="hdo_8c.html#aa4c2fb760118424ea9c295b05189f47b">tlg_decode</a></div><div class="ttdeci">int tlg_decode(int num, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="hdo_8c_source.html#l00084">hdo.c:84</a></div></div>
<div class="ttc" id="main_8c_html_af50205b6311e3e2b696db2ff888dbaed"><div class="ttname"><a href="main_8c.html#af50205b6311e3e2b696db2ff888dbaed">pswitch</a></div><div class="ttdeci">static volatile int pswitch</div><div class="ttdoc">přepínač buferů </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00137">main.c:137</a></div></div>
<div class="ttc" id="main_8c_html_a89600146ff1cdb297db482a9731aefc0"><div class="ttname"><a href="main_8c.html#a89600146ff1cdb297db482a9731aefc0">result</a></div><div class="ttdeci">static short result</div><div class="ttdoc">Výsledek A/D převodu. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00134">main.c:134</a></div></div>
<div class="ttc" id="led_8h_html_a14c184b30679f0e8f3472de693de3a9c"><div class="ttname"><a href="led_8h.html#a14c184b30679f0e8f3472de693de3a9c">LED_Set</a></div><div class="ttdeci">unsigned char LED_Set(unsigned int led)</div><div class="ttdef"><b>Definition:</b> <a href="led_8c_source.html#l00078">led.c:78</a></div></div>
<div class="ttc" id="pit_8h_html"><div class="ttname"><a href="pit_8h.html">pit.h</a></div></div>
<div class="ttc" id="led_8h_html_a1ba3dbb49e39a10ae34edd133bdc5749"><div class="ttname"><a href="led_8h.html#a1ba3dbb49e39a10ae34edd133bdc5749">LED_Clear</a></div><div class="ttdeci">unsigned char LED_Clear(unsigned int led)</div><div class="ttdef"><b>Definition:</b> <a href="led_8c_source.html#l00108">led.c:108</a></div></div>
<div class="ttc" id="pit_8h_html_a6f180b265d87b9ac11fe2aaf33f871fa"><div class="ttname"><a href="pit_8h.html#a6f180b265d87b9ac11fe2aaf33f871fa">PIT_EnableIT</a></div><div class="ttdeci">void PIT_EnableIT(void)</div><div class="ttdoc">Enable PIT periodic interrupt. </div><div class="ttdef"><b>Definition:</b> <a href="pit_8c_source.html#l00072">pit.c:72</a></div></div>
<div class="ttc" id="pit_8h_html_aa8bd959a8245cb7be998b836d1ecea9f"><div class="ttname"><a href="pit_8h.html#aa8bd959a8245cb7be998b836d1ecea9f">PIT_Init</a></div><div class="ttdeci">void PIT_Init(unsigned int period, unsigned int pit_frequency)</div><div class="ttdef"><b>Definition:</b> <a href="pit_8c_source.html#l00046">pit.c:46</a></div></div>
<div class="ttc" id="goertzel_8h_html_a80be7aab3945fc7dec9768728edfdb29"><div class="ttname"><a href="goertzel_8h.html#a80be7aab3945fc7dec9768728edfdb29">calc_coeff</a></div><div class="ttdeci">aritfmt calc_coeff(float nfreq)</div><div class="ttdef"><b>Definition:</b> <a href="goertzel_8c_source.html#l00023">goertzel.c:23</a></div></div>
<div class="ttc" id="hdo_8c_html_ae78234a72fc195b9d8ce70596d1ebba3"><div class="ttname"><a href="hdo_8c.html#ae78234a72fc195b9d8ce70596d1ebba3">hdo_action</a></div><div class="ttdeci">int hdo_action(char *tlg, const char *command)</div><div class="ttdef"><b>Definition:</b> <a href="hdo_8c_source.html#l00156">hdo.c:156</a></div></div>
<div class="ttc" id="pio_8h_html_a2e86ed748eb3ae9574ac9822e67154f6"><div class="ttname"><a href="pio_8h.html#a2e86ed748eb3ae9574ac9822e67154f6">PIO_LISTSIZE</a></div><div class="ttdeci">#define PIO_LISTSIZE(pPins)</div><div class="ttdef"><b>Definition:</b> <a href="pio_8h_source.html#l00110">pio.h:110</a></div></div>
<div class="ttc" id="main_8c_html_a60b1362f77905db322205b68512cc3b9"><div class="ttname"><a href="main_8c.html#a60b1362f77905db322205b68512cc3b9">BOARD_ADC_FREQ</a></div><div class="ttdeci">#define BOARD_ADC_FREQ</div><div class="ttdoc">frekvence hodin ADC převodníku </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00121">main.c:121</a></div></div>
<div class="ttc" id="board_8h_html_a0c6ba600c2305b2347eaa9e00e4d8add"><div class="ttname"><a href="board_8h.html#a0c6ba600c2305b2347eaa9e00e4d8add">PINS_ADC</a></div><div class="ttdeci">#define PINS_ADC</div><div class="ttdoc">Pins ADC. </div><div class="ttdef"><b>Definition:</b> <a href="board_8h_source.html#l00235">board.h:235</a></div></div>
<div class="ttc" id="adc_8h_html_a144e94d9b29371c7e15ecb2872e59d70"><div class="ttname"><a href="adc_8h.html#a144e94d9b29371c7e15ecb2872e59d70">ADC_StartConversion</a></div><div class="ttdeci">void ADC_StartConversion(AT91S_ADC *pAdc)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00181">adc.c:181</a></div></div>
<div class="ttc" id="stdio_8c_html_ad6c265f6d41266cbb62035915f9c0030"><div class="ttname"><a href="stdio_8c.html#ad6c265f6d41266cbb62035915f9c0030">printf</a></div><div class="ttdeci">signed int printf(const char *pFormat,...)</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8c_source.html#l00473">stdio.c:473</a></div></div>
<div class="ttc" id="aic_8h_html_a0e2e5c00d265e4ac861a7a3aff0bd156"><div class="ttname"><a href="aic_8h.html#a0e2e5c00d265e4ac861a7a3aff0bd156">AIC_EnableIT</a></div><div class="ttdeci">void AIC_EnableIT(unsigned int source)</div><div class="ttdef"><b>Definition:</b> <a href="aic_8c_source.html#l00074">aic.c:74</a></div></div>
<div class="ttc" id="adc_8h_html_a8e6a2fc2cfff3822bda1e4041fcb53c2"><div class="ttname"><a href="adc_8h.html#a8e6a2fc2cfff3822bda1e4041fcb53c2">ADC_EnableChannel</a></div><div class="ttdeci">void ADC_EnableChannel(AT91S_ADC *pAdc, unsigned int channel)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00149">adc.c:149</a></div></div>
<div class="ttc" id="led_8h_html"><div class="ttname"><a href="led_8h.html">led.h</a></div></div>
<div class="ttc" id="board_8h_html_ae9cca1603768bb2e6c82bd0ccedf2b5c"><div class="ttname"><a href="board_8h.html#ae9cca1603768bb2e6c82bd0ccedf2b5c">BOARD_MCK</a></div><div class="ttdeci">#define BOARD_MCK</div><div class="ttdoc">Master clock frequency (when using board_lowlevel.c), in Hz. </div><div class="ttdef"><b>Definition:</b> <a href="board_8h_source.html#l00096">board.h:96</a></div></div>
<div class="ttc" id="main_8c_html_a93e43f445f37f6b4655bd3d596950db5"><div class="ttname"><a href="main_8c.html#a93e43f445f37f6b4655bd3d596950db5">timestamp</a></div><div class="ttdeci">static volatile unsigned int timestamp</div><div class="ttdoc">Pomocný timestamp v milisekundách. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00131">main.c:131</a></div></div>
<div class="ttc" id="trace_8h_html_a67a8f9bc74358aa21745a76e23768dae"><div class="ttname"><a href="trace_8h.html#a67a8f9bc74358aa21745a76e23768dae">TRACE_DEBUG</a></div><div class="ttdeci">#define TRACE_DEBUG(...)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00186">trace.h:186</a></div></div>
<div class="ttc" id="dbgu_8h_html_aa6981b9ed604211543dd66ff300db92f"><div class="ttname"><a href="dbgu_8h.html#aa6981b9ed604211543dd66ff300db92f">DBGU_STANDARD</a></div><div class="ttdeci">#define DBGU_STANDARD</div><div class="ttdoc">Standard operating mode (asynchronous, 8bit, no parity, 1 stop bit) </div><div class="ttdef"><b>Definition:</b> <a href="dbgu_8h_source.html#l00061">dbgu.h:61</a></div></div>
<div class="ttc" id="main_8c_html_ae042ff7607b467a923e8151dbf363ef0"><div class="ttname"><a href="main_8c.html#ae042ff7607b467a923e8151dbf363ef0">ISR_Pit</a></div><div class="ttdeci">static void ISR_Pit(void)</div><div class="ttdoc">Přerušovací rutina pro PIT interrupt. Inkrementuje timestamp a startuje převod. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00147">main.c:147</a></div></div>
<div class="ttc" id="pit_8h_html_a52f00a87f1a6bffa8a6aeeef0ea7c751"><div class="ttname"><a href="pit_8h.html#a52f00a87f1a6bffa8a6aeeef0ea7c751">PIT_GetPIVR</a></div><div class="ttdeci">unsigned int PIT_GetPIVR(void)</div><div class="ttdoc">Read System timer CPIV and PICNT without ressetting the counters. </div><div class="ttdef"><b>Definition:</b> <a href="pit_8c_source.html#l00112">pit.c:112</a></div></div>
<div class="ttc" id="adc_8h_html_ad81de8e05cf975c2a543a2d113bbee5a"><div class="ttname"><a href="adc_8h.html#ad81de8e05cf975c2a543a2d113bbee5a">ADC_DisableIt</a></div><div class="ttdeci">void ADC_DisableIt(AT91S_ADC *pAdc, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00276">adc.c:276</a></div></div>
<div class="ttc" id="goertzel_8h_html_a31cae6c660786d9bc292328f84f80693"><div class="ttname"><a href="goertzel_8h.html#a31cae6c660786d9bc292328f84f80693">goertzel</a></div><div class="ttdeci">int goertzel(aritfmt coeff, short *samples, int n)</div><div class="ttdef"><b>Definition:</b> <a href="goertzel_8c_source.html#l00045">goertzel.c:45</a></div></div>
<div class="ttc" id="led_8h_html_a735b8eee6634106b844cd5cdae1be20d"><div class="ttname"><a href="led_8h.html#a735b8eee6634106b844cd5cdae1be20d">LED_Configure</a></div><div class="ttdeci">unsigned char LED_Configure(unsigned int led)</div><div class="ttdef"><b>Definition:</b> <a href="led_8c_source.html#l00057">led.c:57</a></div></div>
<div class="ttc" id="main_8c_html_a142bb31180c2ee763974cb8532cc0758"><div class="ttname"><a href="main_8c.html#a142bb31180c2ee763974cb8532cc0758">ISR_Adc</a></div><div class="ttdeci">static void ISR_Adc(void)</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00166">main.c:166</a></div></div>
<div class="ttc" id="main_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Vlastní program. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00215">main.c:215</a></div></div>
<div class="ttc" id="board_8h_html"><div class="ttname"><a href="board_8h.html">board.h</a></div></div>
<div class="ttc" id="pio_8h_html"><div class="ttname"><a href="pio_8h.html">pio.h</a></div></div>
<div class="ttc" id="main_8c_html_af9179a79580e2761d7045b0e4b005ccb"><div class="ttname"><a href="main_8c.html#af9179a79580e2761d7045b0e4b005ccb">buf_b</a></div><div class="ttdeci">static short buf_b[GOERTZEL_N]</div><div class="ttdoc">druhý bufer pro AD data </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00136">main.c:136</a></div></div>
<div class="ttc" id="hdo_8c_html_a77e237b58e4371580dfc9f4d44730d61"><div class="ttname"><a href="hdo_8c.html#a77e237b58e4371580dfc9f4d44730d61">hdo_init</a></div><div class="ttdeci">void hdo_init(int tv)</div><div class="ttdef"><b>Definition:</b> <a href="hdo_8c_source.html#l00182">hdo.c:182</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generováno programem &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
