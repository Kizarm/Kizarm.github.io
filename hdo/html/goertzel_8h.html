<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>hdo: Dokumentace souboru /home/mrazik/Projekty/Kizarm.github.io/hdo/hdo/goertzel.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hdo
   &#160;<span id="projectnumber">beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generováno programem Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hlavní&#160;stránka</span></a></li>
      <li><a href="pages.html"><span>Ostatní&#160;stránky</span></a></li>
      <li><a href="annotated.html"><span>Třídy</span></a></li>
      <li class="current"><a href="files.html"><span>Soubory</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Seznam&#160;souborů</span></a></li>
      <li><a href="globals.html"><span>Globální&#160;symboly</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_92b95843e90daadc485b14226e438e59.html">mrazik</a></li><li class="navelem"><a class="el" href="dir_f3ad28f1896cd39387847ce3c3236ab1.html">Projekty</a></li><li class="navelem"><a class="el" href="dir_0a864d6769c20f4e975f7bd32848bb20.html">Kizarm.github.io</a></li><li class="navelem"><a class="el" href="dir_d5357cb57dcee12078a4c73baa854556.html">hdo</a></li><li class="navelem"><a class="el" href="dir_1b8f3ca87cec8965627da2ca6054f7aa.html">hdo</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Definice maker</a> &#124;
<a href="#typedef-members">Definice typů</a> &#124;
<a href="#func-members">Funkce</a>  </div>
  <div class="headertitle">
<div class="title">Dokumentace souboru goertzel.h</div>  </div>
</div><!--header-->
<div class="contents">

<p>Výpočet poměrného obsahu signálu o dané frekvenci ve vzorku.  
<a href="#details">...</a></p>

<p><a href="goertzel_8h_source.html">Zobrazit zdrojový text tohoto souboru.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Definice maker</h2></td></tr>
<tr class="memitem:a3e54a43ba47c98ea91d741ae4a1719ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e54a43ba47c98ea91d741ae4a1719ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>&#160;&#160;&#160;166</td></tr>
<tr class="memdesc:a3e54a43ba47c98ea91d741ae4a1719ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">počet vzorků, ze kterých se to počítá <br /></td></tr>
<tr class="separator:a3e54a43ba47c98ea91d741ae4a1719ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ec9d115bbc5356a69daf738b1c4bcf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a27ec9d115bbc5356a69daf738b1c4bcf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#a27ec9d115bbc5356a69daf738b1c4bcf">ISHIFT</a>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:a27ec9d115bbc5356a69daf738b1c4bcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">pro výpočet v integer - při míň je to nepřesné, víc zase přetéká (max.14) <br /></td></tr>
<tr class="separator:a27ec9d115bbc5356a69daf738b1c4bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91ae249f66ada43fc1e1327835b66f4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad91ae249f66ada43fc1e1327835b66f4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#ad91ae249f66ada43fc1e1327835b66f4">HSHIFT</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:ad91ae249f66ada43fc1e1327835b66f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">změnšení výsledku na "rozumné" číslo <br /></td></tr>
<tr class="separator:ad91ae249f66ada43fc1e1327835b66f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Definice typů</h2></td></tr>
<tr class="memitem:aab5732a4134978da59bf9f701b3bc349"><td class="memItemLeft" align="right" valign="top">typedef int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a></td></tr>
<tr class="separator:aab5732a4134978da59bf9f701b3bc349"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funkce</h2></td></tr>
<tr class="memitem:a80be7aab3945fc7dec9768728edfdb29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#a80be7aab3945fc7dec9768728edfdb29">calc_coeff</a> (float nfreq)</td></tr>
<tr class="separator:a80be7aab3945fc7dec9768728edfdb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31cae6c660786d9bc292328f84f80693"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="goertzel_8h.html#a31cae6c660786d9bc292328f84f80693">goertzel</a> (<a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a> coeff, short *samples, int n)</td></tr>
<tr class="separator:a31cae6c660786d9bc292328f84f80693"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailní popis</h2>
<div class="textblock"><p>Efektivní algoritmus výpočtu jednoho koeficienu Fourierovy řady, tedy poměrného výkonu či napětí o určité frekvenci. Je použita rekurze, na jeden vzorek je třeba jen jedno násobení a 3 sčítání. Algoritmus je vlastně IIR filtr 3. řádu. Lze počítat i v integer číslech, pak je třeba navíc používat správně aritmetické shifty, aby byl výpočet aritmeticky konzistentní, ve float toto není nutné. Výstup algoritmu určuje poměrné zastoupení dané frekvence, je to sčítáno přes všechny vzorky a tedy vycházejí velmi velká čísla. Je nutné si uvědomit, že IIR filtr může být nestabilní a zde také je - pokud budeme zvyšovat počet zpracovávaných vzorků výstupní hodnota poroste, takže může překročit rozsah použitého typu. Zde je výpočet odladěn tak, aby k tomu nedocházelo. <b>Příklad:</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="goertzel_8h.html">goertzel.h</a>&quot;</span></div><div class="line"><span class="keywordtype">int</span> coeff;</div><div class="line"><span class="keywordtype">int</span> gresult;</div><div class="line"><a class="code" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a> buf [<a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>];</div><div class="line"></div><div class="line">coeff = <a class="code" href="goertzel_8h.html#a80be7aab3945fc7dec9768728edfdb29">calc_coeff</a> (440.0 / 8000.0);</div><div class="line">...</div><div class="line">gresult = <a class="code" href="goertzel_8h.html#a31cae6c660786d9bc292328f84f80693">goertzel</a> (coeff, buf, <a class="code" href="goertzel_8h.html#a3e54a43ba47c98ea91d741ae4a1719ed">GOERTZEL_N</a>);</div></div><!-- fragment --><p> proměnná <b>gresult</b> pak obsahuje poměr napětí (výkonu) tónu komorního a v buferu <b>buf</b> při vzorkování 8 kHz </p>

<p>Definice v souboru <a class="el" href="goertzel_8h_source.html">goertzel.h</a>.</p>
</div><h2 class="groupheader">Dokumentace definic typů</h2>
<a class="anchor" id="aab5732a4134978da59bf9f701b3bc349"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>normálně se počítá ve float, jde to počítat i v 32-bit integer - u jednočipů se nepředpokládá aritmetická jednotka s pohyblivou čárkou. Je to tedy rychlejší, přesnost zde není prioritou. </p>

<p>Definice je uvedena na řádku <a class="el" href="goertzel_8h_source.html#l00045">45</a> v souboru <a class="el" href="goertzel_8h_source.html">goertzel.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Dokumentace funkcí</h2>
<a class="anchor" id="a80be7aab3945fc7dec9768728edfdb29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a> calc_coeff </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>nfreq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Počítá koeficient Goertzelova algoritmu </p><dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramname">nfreq</td><td>Normalizovaná frekvence = požadovaná / vzorkovací frekv. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Návratová hodnota</dt><dd>Koeficient Goertzelova algoritmu </dd></dl>

<p>Definice je uvedena na řádku <a class="el" href="goertzel_8c_source.html#l00023">23</a> v souboru <a class="el" href="goertzel_8c_source.html">goertzel.c</a>.</p>

<p>Odkazuje se na <a class="el" href="goertzel_8h_source.html#l00037">ISHIFT</a>.</p>

<p>Používá se v <a class="el" href="main_8c_source.html#l00215">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a31cae6c660786d9bc292328f84f80693"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int goertzel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="goertzel_8h.html#aab5732a4134978da59bf9f701b3bc349">aritfmt</a>&#160;</td>
          <td class="paramname"><em>coeff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short *&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Vlastní výpočet napětí (výkonu) podle Goertzelova algoritmu </p><dl class="params"><dt>Parametry</dt><dd>
  <table class="params">
    <tr><td class="paramname">coeff</td><td>Koeficient, spočítaný pomocí <a class="el" href="goertzel_8h.html#a80be7aab3945fc7dec9768728edfdb29">calc_coeff()</a> </td></tr>
    <tr><td class="paramname">samples</td><td>Ukazatel na bufer, obsahující n vzorků </td></tr>
    <tr><td class="paramname">n</td><td>Počet vzorků </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Návratová hodnota</dt><dd>hodnota úměrná efektivnímu napětí signálu o dané frekvenci </dd></dl>

<p>Definice je uvedena na řádku <a class="el" href="goertzel_8c_source.html#l00045">45</a> v souboru <a class="el" href="goertzel_8c_source.html">goertzel.c</a>.</p>

<p>Odkazuje se na <a class="el" href="goertzel_8h_source.html#l00038">HSHIFT</a> a <a class="el" href="goertzel_8h_source.html#l00037">ISHIFT</a>.</p>

<p>Používá se v <a class="el" href="main_8c_source.html#l00215">main()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generováno programem &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
